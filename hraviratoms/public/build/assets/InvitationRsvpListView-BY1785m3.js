import{u as y}from"./app-5hV_1kiU.js";import{r as p,c as g,j as b,f as l,g as t,l as d,x as k,z as s,F as w,A as S,o as n}from"./runtime-dom.esm-bundler-CaHSP4Q1.js";const R={class:"mb-4 flex flex-wrap items-baseline justify-between gap-3"},V={key:0,class:"mt-1 text-sm text-slate-600"},P={key:0},D={key:0,class:"text-xs"},L=["href"],$={key:0,class:"mb-5 grid gap-4 md:grid-cols-4"},B={class:"card-soft p-4"},j={class:"mt-2 text-2xl font-semibold text-slate-900"},E={class:"card-soft p-4"},F={class:"mt-2 text-2xl font-semibold text-slate-900"},N={class:"mt-1 text-[11px] text-slate-500"},U={class:"card-soft p-4"},C={class:"mt-2 text-2xl font-semibold text-slate-900"},G={class:"card-soft p-4"},M={class:"mt-2 text-2xl font-semibold text-slate-900"},T={class:"mt-1 text-[11px] text-slate-500"},z={class:"overflow-hidden rounded-2xl border bg-white shadow-sm"},A={class:"min-w-full text-left text-sm"},I={key:0},q={class:"px-4 py-3 align-top"},H={class:"font-medium text-slate-900"},J={class:"px-4 py-3 align-top"},K={key:0,class:"inline-flex rounded-full bg-leaf-soft/40 px-2 py-0.5 text-[11px] font-medium text-leaf-deep"},O={key:1,class:"inline-flex rounded-full bg-amber-50 px-2 py-0.5 text-[11px] font-medium text-amber-700"},Q={key:2,class:"inline-flex rounded-full bg-slate-100 px-2 py-0.5 text-[11px] font-medium text-slate-600"},W={class:"px-4 py-3 align-top text-xs text-slate-700"},X={class:"px-4 py-3 align-top text-xs text-slate-700"},Y={class:"px-4 py-3 align-top text-xs text-slate-700"},Z={class:"max-w-xs whitespace-pre-wrap"},tt={class:"px-4 py-3 align-top text-xs text-slate-500"},et={key:1,class:"mt-3 text-xs text-red-500"},st={key:2,class:"mt-3 text-xs text-slate-500"},nt={__name:"InvitationRsvpListView",setup(at){const m=y(),i=p(null),r=p(null),u=p([]),c=p(!0),x=p(""),_=g(()=>i.value?`${window.location.origin}/i/${i.value.slug}`:""),f=async()=>{c.value=!0,x.value="";try{const a=m.params.id,e=await fetch(`/api/invitations/${a}/rsvps`);if(!e.ok)throw new Error("Failed to load RSVPs");const o=await e.json();i.value=o.invitation,r.value=o.stats,u.value=o.items||[]}catch(a){console.error(a),x.value=a.message||"Error loading RSVPs"}finally{c.value=!1}},v=a=>{if(!a)return"";try{return new Date(a).toLocaleDateString("ru-RU")}catch{return a}},h=a=>{if(!a)return"";try{return new Date(a).toLocaleString("ru-RU",{dateStyle:"short",timeStyle:"short"})}catch{return a}};return b(f),(a,e)=>(n(),l("section",null,[t("button",{type:"button",class:"mb-4 text-xs text-slate-500 hover:text-leaf-deep",onClick:e[0]||(e[0]=o=>a.$router.push({name:"invitations.index"}))}," ← Back to invitations "),t("div",R,[t("div",null,[e[1]||(e[1]=t("h1",{class:"text-2xl font-display font-semibold text-slate-900"}," Guests & RSVP ",-1)),i.value?(n(),l("p",V,[k(s(i.value.bride_name)+" & "+s(i.value.groom_name)+" ",1),i.value.date?(n(),l("span",P," · "+s(v(i.value.date)),1)):d("",!0)])):d("",!0)]),i.value?(n(),l("div",D,[e[2]||(e[2]=t("p",{class:"text-slate-500"},"Public link:",-1)),t("a",{href:_.value,target:"_blank",class:"text-leaf hover:text-leaf-deep underline underline-offset-2"},s(_.value),9,L)])):d("",!0)]),r.value?(n(),l("div",$,[t("div",B,[e[3]||(e[3]=t("p",{class:"text-[11px] uppercase tracking-[0.2em] text-slate-500"}," Ընդհանուր պատասխաններ ",-1)),t("p",j,s(r.value.total_responses),1)]),t("div",E,[e[4]||(e[4]=t("p",{class:"text-[11px] uppercase tracking-[0.2em] text-leaf-deep"}," Կգան ",-1)),t("p",F,s(r.value.yes),1),t("p",N," Մոտ "+s(r.value.guests_yes_count)+" մարդ ",1)]),t("div",U,[e[5]||(e[5]=t("p",{class:"text-[11px] uppercase tracking-[0.2em] text-slate-500"}," Հնարավոր է ",-1)),t("p",C,s(r.value.maybe),1)]),t("div",G,[e[6]||(e[6]=t("p",{class:"text-[11px] uppercase tracking-[0.2em] text-slate-500"}," Չեն մասնակցի ",-1)),t("p",M,s(r.value.no),1),t("p",T," Ընդամենը "+s(r.value.guests_total)+" հայտավորված հյուր ",1)])])):d("",!0),t("div",z,[t("table",A,[e[8]||(e[8]=t("thead",{class:"bg-slate-50 text-xs uppercase tracking-wide text-slate-500"},[t("tr",null,[t("th",{class:"px-4 py-3"},"Guest"),t("th",{class:"px-4 py-3"},"Status"),t("th",{class:"px-4 py-3"},"People"),t("th",{class:"px-4 py-3"},"Phone"),t("th",{class:"px-4 py-3"},"Message"),t("th",{class:"px-4 py-3"},"Submitted at")])],-1)),t("tbody",null,[!c.value&&u.value.length===0?(n(),l("tr",I,[...e[7]||(e[7]=[t("td",{class:"px-4 py-4 text-sm text-slate-500",colspan:"6"}," Пока нет ни одного RSVP. Как только гости начнут отвечать, они появятся здесь. ",-1)])])):d("",!0),(n(!0),l(w,null,S(u.value,o=>(n(),l("tr",{key:o.id,class:"border-t last:border-b hover:bg-slate-50/60"},[t("td",q,[t("div",H,s(o.guest_name),1)]),t("td",J,[o.status==="yes"?(n(),l("span",K," Կգամ ")):o.status==="maybe"?(n(),l("span",O," Հնարավոր է ")):(n(),l("span",Q," Չեմ կարող "))]),t("td",W,s(o.guests_count),1),t("td",X,s(o.guest_phone||"—"),1),t("td",Y,[t("div",Z,s(o.message||"—"),1)]),t("td",tt,s(h(o.created_at)),1)]))),128))])])]),x.value?(n(),l("p",et,s(x.value),1)):d("",!0),c.value?(n(),l("div",st," Loading RSVPs... ")):d("",!0)]))}};export{nt as default};
